<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>軸を制する者はゲームを制す</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 10px;
      max-width: 95vw;
      font-size: 18px;
      line-height: 1.6;
    }
    h1 {
      font-size: 24px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
      font-size: 20px;
    }
    .form-section {
      margin-bottom: 20px;
      max-width: 21em;
    }
    button, input[type="radio"], select, textarea {
      font-size: 18px;
    }
    .radio-group {
      margin: 5px 0;
    }
    .output {
      white-space: pre-line;
      background: #f4f4f4;
      padding: 10px;
      margin-top: 20px;
      word-break: break-word;
      font-size: 18px;
      max-width: 21em;
    }
    textarea {
      width: 100%;
      font-size: 18px;
    }
    .generate-button {
      background-color: lightgreen;
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-bottom: 10px;
      display: inline-block;
      max-width: 100%;
    }
    .copy-button {
      background-color: pink;
      color: #000;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      display: inline-block;
      margin-top: 10px;
      max-width: 100%;
    }
    #himo-container label, #factor-container label {
      font-size: 20px;
      display: inline-block;
      margin-right: 10px;
      margin-bottom: 5px;
    }
    #himo-container input[type="checkbox"], #factor-container input[type="checkbox"] {
      transform: scale(1.5);
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <div class="form-section">
    <label>【自信度】</label>
    <select id="confidence">
      <option value="">選んでください</option>
      <option value="120％">120％</option>
      <option value="100％">100％</option>
      <option value="75％">75％</option>
      <option value="50％">50％</option>
      <option value="25％">25％</option>
    </select>
  </div>
  <br>
  <div class="form-section">
    <label>【会場】</label>
    <select id="venue">
      <option value="">選んでください</option>
      <option>園田</option>
      <option>名古屋</option>
      <option>浦和</option>
      <option>門別</option>
    </select>
  </div>
  <br>
  <div class="form-section">
    <label>【レース番号】</label>
    <select id="raceNumber">
      <option value="">選んでください</option>
      <option>01R</option>
      <option>02R</option>
      <option>03R</option>
      <option>04R</option>
      <option>05R</option>
      <option>06R</option>
      <option>07R</option>
      <option>08R</option>
      <option>09R</option>
      <option>10R</option>
      <option>11R</option>
      <option>12R</option>
    </select>
  </div>
  <br>
  <div class="form-section">
    <label>【軸】</label>
    <select id="jiku"></select>
  </div>
  <br>
  <div class="form-section">
    <label>【軸の確度】</label>
    <select id="jikuType">
      <option value="">選んでください</option>
      <option>3連単の頭固定で買えるレベル</option>
      <option>頭固定は厳しいが複勝圏内でなら軸にできる</option>
      <option>穴狙いなので軸とはいい難し</option>
    </select>
  </div>
  <br>
  <div class="form-section">
    <label>【選んだ理由】※複数選択可能</label>
    <div id="factor-container"></div>
  </div>
  <br>
  <div class="form-section">
    <label>【馬単・馬連の紐】※5頭まで選択可</label>
    <div id="himo-container"></div>
    <div id="himo-warning" style="color:red; display:none">馬単・馬連の紐は5頭までだよ</div>
  </div>
  <br>
  <div class="form-section">
    <label>【フリーテキスト】</label>
    <textarea id="freeText" rows="4"></textarea>
  </div>
  <br>
  <button class="generate-button" onclick="generateMessage()">文章を生成</button>
  <br>
  <div class="output" id="output"></div>
  
  <button class="copy-button" onclick="copyMessage()">コピー</button>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const jikus = "①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯".split("");
      const jikuSelect = document.getElementById("jiku");

      const defaultOption = document.createElement("option");
      defaultOption.value = "";
      defaultOption.textContent = "選んでください";
      jikuSelect.appendChild(defaultOption);

      jikus.forEach(j => {
        const option = document.createElement("option");
        option.value = j;
        option.textContent = j;
        jikuSelect.appendChild(option);
      });

      const factorList = ["パドック","持ち時計","調教","過去戦績","血統","脚質","今日の馬場傾向（前残り）","今日の馬場傾向（差し届く）","他のサイトを参考にした","オリジナル指数"];
      const factorContainer = document.getElementById("factor-container");
      factorList.forEach(f => {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "checkbox";
        input.name = "factor";
        input.value = f;
        label.appendChild(input);
        label.appendChild(document.createTextNode(f));
        factorContainer.appendChild(label);
      });

      const himoContainer = document.getElementById("himo-container");
      jikus.forEach(j => {
        const label = document.createElement("label");
        const input = document.createElement("input");
        input.type = "checkbox";
        input.name = "himo";
        input.value = j;
        input.onclick = validateHimo;
        label.appendChild(input);
        label.appendChild(document.createTextNode(j));
        himoContainer.appendChild(label);
      });
    });

    function getSelectValue(id) {
      const el = document.getElementById(id);
      return el ? el.value : '';
    }
    function getValues(name) {
      return Array.from(document.querySelectorAll(`input[name='${name}']:checked`)).map(e => e.value);
    }
    function generateMessage() {
      const venue = getSelectValue('venue');
      const raceNumber = getSelectValue('raceNumber');
      const jiku = getSelectValue('jiku');
      const jikuType = getSelectValue('jikuType');
      const factors = getValues('factor').join('・');
      const confidence = getSelectValue('confidence');
      const himo = getValues('himo').join('');
      const free = document.getElementById('freeText').value;
      const msg = `【${venue}${raceNumber}】\n自信度：${confidence}\n軸：${jiku}\n軸の確度：${jikuType}\n選んだ理由：${factors}\n馬単・馬連の紐：${himo}\n\n${free}`;
      document.getElementById('output').textContent = msg;
    }
    function copyMessage() {
      const text = document.getElementById('output').textContent;
      navigator.clipboard.writeText(text).then(() => alert('コピーしました！'));
    }
    function validateHimo() {
      const selected = getValues('himo');
      document.getElementById('himo-warning').style.display = selected.length > 5 ? 'block' : 'none';
    }
  </script>
</body>
</html>
