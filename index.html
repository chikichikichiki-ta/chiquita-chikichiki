<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>主軸を制する者はゲームを制す～勝利の方程式(地方版)～</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 10px;
      max-width: 95vw;
      font-size: 16px;
    }
    h1 {
      font-size: 24px;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    .form-section {
      margin-bottom: 20px;
    }
    button, input[type="radio"], select, textarea {
      font-size: 18px;
      width: 100%;
      max-width: 100%;
    }
    .radio-group {
      margin: 5px 0;
    }
    .output {
      white-space: pre-line;
      background: #f4f4f4;
      padding: 10px;
      margin-top: 20px;
      word-break: break-word;
      font-size: 16px;
      line-height: 1.5;
    }
    textarea {
      width: 100%;
      font-size: 16px;
    }
  </style>
</head>
<body>
  <h1>軸選びを皆で協力しよう！</h1>
  <br>
  <p><strong>▼当ツールの使い方</strong><br>
　1：下記入力フォームを埋める（未入力可）<br>
　2：文章を生成ボタンを押す<br>
　3：コピーボタンを押す<br>
　4：オープンチャットに戻って貼り付ける<br>
　5：投稿する</p>

  <div class="form-section">
    <label>【自信度】</label>
    <select id="confidence">
      <option value="">選んでください</option>
      <option value="120％（SSS）">120％（SSS）</option>
      <option value="100％（自信はある）">85％（自信はある）</option>
      <option value="50％（正直自信ない）">50％（正直自信ない）</option>
      <option value="25％（穴狙い）">25％（穴狙い）</option>
    </select>
  </div>

  <div class="form-section">
    <label>【会場】</label>
    <select id="venue">
      <option value="">選んでください</option>
      <option>園田</option>
      <option>名古屋</option>
      <option>浦和</option>
      <option>門別</option>
    </select>
  </div>

  <div class="form-section">
    <label>【レース番号】</label>
    <select id="raceNumber">
      <option value="">選んでください</option>
      <script>
        for (let i = 1; i <= 12; i++) {
          const num = String(i).padStart(2, '0');
          document.write(`<option value="${num}">${num}R</option>`);
        }
      </script>
    </select>
  </div>

  <div class="form-section">
    <label>【軸】</label>
    <select id="jiku">
      <option value="">選んでください</option>
      <script>
        const jikus = "①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯".split("");
        jikus.forEach(j => document.write(`<option value="${j}">${j}</option>`));
      </script>
    </select>
  </div>

  <div class="form-section">
    <label>【軸の確度】</label>
    <select id="jikuType">
      <option value="">選んでください</option>
      <option>3連単の頭固定で買えるレベル</option>
      <option>頭固定は厳しいが複勝圏内でなら軸にできる</option>
    </select>
  </div>

  <div class="form-section">
    <label>【選んだ理由】※複数選択可能</label>
    <script>
      const factors = ["パドック","持ち時計","調教","過去戦績","血統","脚質","今日の馬場傾向（前残り）","今日の馬場傾向（差し届く）","Xで誰かが推してた","Youtuberが推してた","パドック解説者が推してた"];
      factors.forEach(f => {
        document.write(`<label><input type="checkbox" name="factor" value="${f}">${f}</label>`);
      });
    </script>
  </div>
  <br>
  <br>
  <div class="form-section">
    <label>【馬単・馬連の紐】※複数選択可能（ただし5頭まで）</label>
    <script>
      const jikuset = "①②③④⑤⑥⑦⑧⑨⑩⑪⑫⑬⑭⑮⑯".split("");
      jikuset.forEach(j => {
        document.write(`<label><input type="checkbox" name="himo" value="${j}" onclick="validateHimo()">${j}</label>`);
      });
    </script>
    <div id="himo-warning" style="color:red; display:none">馬単・馬連の紐は5頭までだよ</div>
  </div>

  <div class="form-section">
    <label>【フリーテキスト】（自由に書いてください）</label>
    <textarea id="freeText" rows="4"></textarea>
  </div>

  <button onclick="generateMessage()">文章を生成</button>
  <button onclick="copyMessage()">コピー</button>

  <div class="output" id="output"></div>

  <script>
    function getSelectValue(id) {
      const el = document.getElementById(id);
      return el ? el.value : '';
    }
    function getValues(name) {
      return Array.from(document.querySelectorAll(`input[name='${name}']:checked`)).map(e => e.value);
    }
    function generateMessage() {
      const venue = getSelectValue('venue');
      const raceNumber = getSelectValue('raceNumber');
      const jiku = getSelectValue('jiku');
      const jikuType = getSelectValue('jikuType');
      const factors = getValues('factor').join('・');
      const confidence = getSelectValue('confidence');
      const himo = getValues('himo').join('');
      const free = document.getElementById('freeText').value;
      const msg = `【${venue}${raceNumber}R】\n自信度：${confidence}\n軸：${jiku}\n軸の確度：${jikuType}\n選んだ理由：${factors}\n馬単・馬連の紐：${himo}\n\n${free}`;
      document.getElementById('output').textContent = msg;
    }
    function copyMessage() {
      const text = document.getElementById('output').textContent;
      navigator.clipboard.writeText(text).then(() => alert('コピーしました！'));
    }
    function validateHimo() {
      const selected = getValues('himo');
      document.getElementById('himo-warning').style.display = selected.length > 5 ? 'block' : 'none';
    }
  </script>
</body>
</html>
